import{defineComponent as e,ref as a,computed as t,onMounted as s,watch as l,resolveComponent as n,openBlock as r,createElementBlock as u,normalizeClass as i,toDisplayString as p,createCommentVNode as o,createElementVNode as d,createVNode as m,mergeProps as v}from"vue";import{BigNumber as c,Money as b,unformat as y}from"v-money3";class g extends c{constructor(e){super(e)}add(e){const a=this.adjustComparisonNumbers(e);return this.number=a[0]+a[1],this}subtract(e){const a=this.adjustComparisonNumbers(e);return this.number=a[0]-a[1],this}minMax(e,a,t){return t?this[e?"add":"subtract"](a)[e?"lessThan":"biggerThan"](t)?this:t:this[e?"add":"subtract"](a)}lessEqualThan(e){const a=this.adjustComparisonNumbers(e);return a[0]<=a[1]}biggerEqualThan(e){const a=this.adjustComparisonNumbers(e);return a[0]>=a[1]}}var f={bootstrap:{labelClass:"form-label",inputClass:"form-control",prependClass:"btn btn-outline-secondary fw-bold",appendClass:"btn btn-outline-success fw-bold",wrapperClass:"",wrapperGroupClass:"input-group"}},C="v-money-spinner",h="bootstrap",x=!0,S=1,w="center",T="",N="",F="",M="",k="",j="",q="",V="",$="",A="";const E=e({name:"money-spinner",components:{Money:b},inheritAttrs:!1,props:{id:{required:!1,type:[Number,String],default:()=>C},template:{type:[Boolean,String],default:()=>h},spinner:{type:Boolean,default:()=>x},step:{type:Number,default:()=>S},align:{type:String,default:()=>w},label:{type:String,default:()=>T},labelClass:{type:String,default:()=>N},wrapperClass:{type:String,default:()=>F},wrapperGroupClass:{type:String,default:()=>M},wrapperPrependClass:{type:String,default:()=>k},wrapperAppendClass:{type:String,default:()=>j},prependClass:{type:String,default:()=>q},appendClass:{type:String,default:()=>V},inputClass:{type:String,default:()=>$},invalidClass:{type:String,default:()=>A},modelModifiers:{type:Object,default:()=>({})}},setup(e,{emit:n,attrs:r}){const u=a(),i=t({get:()=>u.value.masked?new g(y(u.value.modelValue,u.value.$props)):new g(u.value.modelValue),set(e){n("update:modelValue",e)}}),p=a=>{u.value.max&&i.value.biggerThan(u.value.max)?i.value=u.value.max.toFixed(u.value.precision):u.value.min&&i.value.lessThan(u.value.min)?i.value=u.value.min.toFixed(u.value.precision):a&&(null===u.value.max||i.value.lessThan(u.value.max))?i.value=i.value.minMax(a,e.step,u.value.max).toFixed(u.value.precision):a||null!==u.value.min&&!i.value.biggerThan(u.value.min)||(i.value=i.value.minMax(a,e.step,u.value.min).toFixed(u.value.precision)),n(a?"plus":"minus",i.value.toFixed(u.value.precision),u.value.$el.value)},o=t((()=>{const a={...r};return e.modelModifiers.number&&(a.masked=!1),a.minCharacters&&(a.minimumNumberOfCharacters=a.minCharacters),a.disableNegative&&(a.min=0),a}));return s((()=>{l((()=>u.value.$el.value),((e,a)=>{n("change",i.value.toFixed(u.value.precision),e,a),((e,a)=>{let t=new g(y(a,u.value.$props)),s=new g(y(e,u.value.$props));t.lessThan(0)&&s.biggerEqualThan(0)?n("positive",s.toFixed(u.value.precision),e,a):t.biggerEqualThan(0)&&s.lessThan(0)&&n("negative",s.toFixed(u.value.precision),e,a)})(e,a)}))})),{money:u,vAttrs:o,plus:()=>{p(!0)},minus:()=>{p(!1)},style:a=>f[e.template]?f[e.template][a]+" "+e[a]:e[a]}}}),B=["for"];E.render=function(e,a,t,s,l,c){const b=n("money");return r(),u("div",{class:i(e.style("wrapperClass"))},[e.label?(r(),u("label",{key:0,class:i(e.style("labelClass")),for:e.id},p(e.label),11,B)):o("",!0),d("div",{class:i(e.style("wrapperGroupClass"))},[e.spinner?(r(),u("button",{key:0,type:"button",onClick:a[0]||(a[0]=(...a)=>e.minus&&e.minus(...a)),class:i(e.style("prependClass"))},"-",2)):o("",!0),m(b,v({ref:"money",id:e.id},e.vAttrs,{class:[e.style("inputClass"),e.template?"text-"+e.align:""]}),null,16,["id","class"]),e.spinner?(r(),u("button",{key:1,type:"button",onClick:a[1]||(a[1]=(...a)=>e.plus&&e.plus(...a)),class:i(e.style("appendClass"))},"+",2)):o("",!0)],2)],2)};var G={install(e){e.component("VMoneySpinner",E)}};export{E as VMoneySpinner,G as default};
